(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e1e2336"],{"0405":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"problems-contain"},[n("div",{staticClass:"problems-list"},[n("div",{staticStyle:{height:"40px","font-weight":"bold","font-size":"16px","line-height":"40px","padding-left":"20px","border-bottom":"1px solid #E5E5E5"}},[e._v("客服服务")]),n("ul",e._l(e.problemList,(function(t,i){return n("li",{key:t.infoId,on:{click:function(n){return e.activeSession(t,i)}}},[n("el-card",{staticStyle:{width:"330px",height:"90px","text-align":"center",float:"left",padding:"0",background:"#fcfcfc"},attrs:{slot:"reference",shadow:"hover"},slot:"reference"},[n("div",{staticStyle:{width:"100%",height:"25px"}},[n("span",{staticStyle:{display:"inline-block",float:"left","font-size":"18px"}},[e._v(e._s(t.customerName))]),n("span",{staticStyle:{display:"inline-block",float:"right","font-size":"14px"}},[e._v(" "+e._s(t.infoTime))])]),n("div",{staticStyle:{width:"100%",height:"25px"}},[n("span",{staticStyle:{display:"inline-block",float:"left","font-size":"14px","margin-top":"10px","margin-left":"20px"}},[e._v(e._s(t.infoContent))]),0!==t.messageCount?n("span",{staticClass:"problems-count"},[e._v(" "+e._s(t.messageCount))]):e._e()])])],1)})),0)]),n("div",{staticClass:"problems-main"},[e.flag?n("div",{staticStyle:{overflow:"hidden"}},[n("el-row",[n("el-col",[n("div",{staticClass:"problems-chat",attrs:{id:"problems-chat",onmouseover:"this.style.overflow='overlay'",onmouseout:"this.style.overflow='hidden'"}},[e._l(e.historyList,(function(t){return n("div",{key:t.infoId,staticStyle:{padding:"0 20px"}},["customer"!==t.infoType?n("el-row",[n("el-col",{attrs:{span:20,offset:2}},[n("span",{staticClass:"aa"},[e._v(" "+e._s(t.infoContent)+" ")])]),n("el-col",{attrs:{span:1}},[n("el-image",{staticStyle:{width:"60px",height:"60px","vertical-align":"middle",display:"inline-block","margin-right":"10px"},attrs:{src:"http://8.131.77.164:8089/CinemaData/img/manager.jpeg",fit:"contain"}})],1)],1):e._e(),n("br"),"customer"===t.infoType?n("el-row",[n("el-col",{attrs:{span:1}},[n("span",[n("el-image",{staticStyle:{width:"50px",height:"50px","vertical-align":"middle",display:"inline-block"},attrs:{src:"http://8.131.77.164:8089/CinemaData/img/"+e.avatar,fit:"contain"}})],1)]),n("el-col",{attrs:{span:20}},[n("span",{staticClass:"bb"},[e._v(" "+e._s(t.infoContent)+" ")])])],1):e._e()],1)})),n("el-row",{staticStyle:{"margin-bottom":"5px"}},[n("el-col",{attrs:{span:10,offset:10}},[n("span",{staticStyle:{"font-size":"16px",color:"#f5f5f5","background-color":"#dadada","margin-bottom":"10px"}},[e._v(" 以上为历史记录 ")]),n("br")])],1),e._l(e.nowList,(function(t){return n("div",{key:t.infoId,staticStyle:{padding:"0 20px"}},["customer"!==t.infoType?n("el-row",[n("el-col",{attrs:{span:20,offset:2}},[n("span",{staticClass:"aa"},[e._v(" "+e._s(t.infoContent)+" ")])]),n("el-col",{attrs:{span:1}},[n("el-image",{staticStyle:{width:"60px",height:"60px","vertical-align":"middle",display:"inline-block","margin-right":"10px"},attrs:{src:"http://8.131.77.164:8089/CinemaData/img/manager.jpeg",fit:"contain"}})],1)],1):e._e(),n("br"),"customer"===t.infoType?n("el-row",[n("el-col",{attrs:{span:1}},[n("span",[n("el-image",{staticStyle:{width:"50px",height:"50px","vertical-align":"middle",display:"inline-block"},attrs:{src:"http://8.131.77.164:8089/CinemaData/img/"+e.avatar,fit:"contain"}})],1)]),n("el-col",{attrs:{span:20}},[n("span",{staticClass:"bb"},[e._v(" "+e._s(t.infoContent)+" ")])])],1):e._e()],1)}))],2),n("div",{staticClass:"problems-chat-input",staticStyle:{width:"800px",position:"relative",height:"100px"}},[n("el-input",{staticStyle:{height:"120px"},attrs:{type:"textarea",autofocus:"",clearable:"",maxlength:"100",autosize:{minRows:5,maxRows:6},resize:"none",placeholder:"在这里输入..."},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}},model:{value:e.condition,callback:function(t){e.condition=t},expression:"condition"}}),n("el-button",{staticStyle:{bottom:"10px",right:"10px",position:"absolute"},attrs:{onmouseover:"this.style.backgroundColor='#129611';this.style.color='#f5f5f5'",onmouseout:"this.style.backgroundColor='#f5f5f5';this.style.color='#606060'"},on:{click:e.sendMessage}},[e._v(" 发送 ")])],1)])],1)],1):n("div",{staticClass:"problems-first"},[e._v(" 请选择一个会话 ")])])])},a=[],r=(n("ac1f"),n("5319"),n("b85c")),o=(n("96cf"),n("1da1")),s=n("5530"),l=n("b775"),c=n("5c96"),u=null,d=null,h=null,f=0;function p(e,t,n){f=0,d=t,h=n;var i="ws://8.131.77.164:8089/CinemaData/ws";u=new WebSocket(i,[e]),u.onmessage=function(e){g(e)},u.onclose=function(e){b(e)},u.onopen=function(){v()},u.onerror=function(){Object(c["Message"])({offset:60,showClose:!0,message:"连接发生错误,请检查您的网络并刷新页面",type:"error",dangerouslyUseHTMLString:!0,duration:3e3}),console.log("WebSocket")}}function m(e,t){h=t,u.readyState===u.OPEN?y(e):(u.readyState,u.CONNECTING,setTimeout((function(){m(e,t)}),1e3))}function g(e){console.log(f),1===f?(d(JSON.parse(e.data)),f++):h(JSON.parse(e.data))}function y(e){u.send(JSON.stringify(e))}function b(e){console.log("connection closed ("+e.code+")")}function v(e){Object(c["Message"])({offset:60,showClose:!0,message:"连接成功",type:"success",dangerouslyUseHTMLString:!0,duration:3e3}),console.log("连接成功"),f++}function x(e){return console.log(e),Object(l["a"])({url:"/gethistoryList",method:"get",params:e})}function w(e){return console.log(e),Object(l["a"])({url:"/changeStatus",method:"get",params:e})}var O=n("2f62"),k={name:"index",data:function(){return{problemList:[],historyList:[],nowList:[],flag:!1,condition:"",avatar:""}},created:function(){this.fetchData()},computed:Object(s["a"])({},Object(O["c"])({username:"user/username",avatar:"user/avatar",accessToken:"user/accessToken"})),methods:{scrollToBottom:function(){this.$nextTick((function(){var e=document.getElementById("problems-chat");e.scrollTop=e.scrollHeight}))},fetchData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.history),t.next=3,p(e.accessToken,e.problemLists,e.results);case 3:case"end":return t.stop()}}),t)})))()},activeSession:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n.flag=e,i.next=3,x({customerId:e.customerId});case 3:a=i.sent,console.log(a.history),console.log(a.avatar),n.historyList=a.history,n.avatar=a.avatar,n.problemList[t].messageCount=0,n.nowList=[],console.log(n.flag);case 11:case"end":return i.stop()}}),i)})))()},problemLists:function(e){console.log("消息列表"),this.problemList=e},historyLists:function(e){console.log("消息列表"),this.historyList=e},results:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i,a,o,s,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("返回的消息"),!e){n.next=33;break}if(i={infoId:e.infoId,infoContent:e.infoContent,infoTime:e.infoTime,infoStatus:e.infoStatus,infoType:e.infoType,customerId:e.customerId,messageCount:0,customerName:e.customerName},t.flag.customerId!==i.customerId){n.next=7;break}return t.nowList.push(i),n.next=7,w({infoId:i.infoId});case 7:a=!1,o=Object(r["a"])(t.problemList),n.prev=9,o.s();case 11:if((s=o.n()).done){n.next=21;break}if(l=s.value,l.customerId!==i.customerId){n.next=19;break}return l.infoContent=i.infoContent,l.infoTime=i.infoTime,t.flag.customerId!==i.customerId&&l.messageCount++,a=!0,n.abrupt("break",21);case 19:n.next=11;break;case 21:n.next=26;break;case 23:n.prev=23,n.t0=n["catch"](9),o.e(n.t0);case 26:return n.prev=26,o.f(),n.finish(26);case 29:console.log(t.problemList),a||(i.messageCount=1,t.problemList.push(i)),n.next=34;break;case 33:t.$message.error("发送失败");case 34:case"end":return n.stop()}}),n,null,[[9,23,26,29]])})))()},clearBr:function(e){return e=e.replace(/<\/?.+?>/g,""),e=e.replace(/[\r\n]/g,""),e},sendMessage:function(){if(this.condition=this.clearBr(this.condition),console.log("对话内容"+this.condition),""===this.condition||void 0===this.condition||null===this.condition)this.$message.error("当前没有输入。。。");else{var e={infoType:"manager"};e["infoContent"]=this.condition,e["customerId"]=this.flag.customerId,m(e,this.results),this.condition=""}this.scrollToBottom()}},beforeRouteLeave:function(e,t,n){this.flag=!1,this.problemList=[],n()}},C=k,S=(n("a14b"),n("2877")),_=Object(S["a"])(C,i,a,!1,null,"dde02034",null);t["default"]=_.exports},"316e":function(e,t,n){"use strict";var i=n("3a17"),a=n.n(i);a.a},"3a17":function(e,t,n){},"45a5":function(e,t,n){},"5d3f":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index-container"},[n("div",{staticClass:"index-left"},[n("ve-line",{attrs:{data:e.chartData,settings:e.chartSettings}})],1),n("div",{staticClass:"calendar"},[n("el-calendar",{model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}})],1),n("div",{staticClass:"time-line"},[n("el-timeline",[n("el-timeline-item",{attrs:{timestamp:e.selectDate.getMonth()+1+"-"+e.selectDate.getDate(),placement:"top"}},[n("el-card",[n("h4",[e._v("更新 Github 模板")]),n("p",[e._v("王小虎 提交于 "+e._s(e.selectDate))])])],1),n("el-timeline-item",{attrs:{timestamp:e.selectDate.getMonth()+1+"-"+e.selectDate.getDate(),placement:"top"}},[n("el-card",[n("h4",[e._v("更新 Github 模板")]),n("p",[e._v("王小虎 提交于 "+e._s(e.selectDate))])])],1),n("el-timeline-item",{attrs:{timestamp:e.selectDate.getMonth()+1+"-"+e.selectDate.getDate(),placement:"top"}},[n("el-card",[n("h4",[e._v("更新 Github 模板")]),n("p",[e._v("王小虎 提交于 "+e._s(e.selectDate))])])],1)],1)],1)])},a=[],r=n("ba1a"),o=n.n(r),s={name:"Index",components:{VeLine:o.a},data:function(){return{selectDate:new Date,dateArray:[],chartSettings:{axisSite:{right:["下单率"]},yAxisType:["KMB","percent"],yAxisName:["数值","比率"]},chartData:{columns:["日期","访问用户","下单用户","下单率","盈利"],rows:[{"日期":"","访问用户":1393,"下单用户":1093,"下单率":.32,"盈利":3300},{"日期":"","访问用户":3530,"下单用户":3230,"下单率":.26,"盈利":5e3},{"日期":"","访问用户":2923,"下单用户":2623,"下单率":.76,"盈利":3400},{"日期":"","访问用户":1723,"下单用户":1423,"下单率":.49,"盈利":3600},{"日期":"","访问用户":3792,"下单用户":3492,"下单率":.323,"盈利":4e3},{"日期":"","访问用户":4593,"下单用户":4293,"下单率":.78,"盈利":2e3},{"日期":"","访问用户":4593,"下单用户":4293,"下单率":.78,"盈利":1500}]}}},watch:{selectDate:"aa"},created:function(){this.getTime(),this.aa()},beforeDestroy:function(){},mounted:function(){},methods:{getTime:function(){this.nowtime=(new Date).toLocaleString(),console.log("nowtime: ",this.nowtime)},aa:function(){var e,t=new Date(this.selectDate);this.dateArray=[],console.log(t),t.setDate(t.getDate()-6);for(var n=1,i=0;i<7;i++)e=t.getMonth()+1+"-"+t.getDate(),this.dateArray.push(e),t.setDate(t.getDate()+n);for(var a=0;a<this.dateArray.length;a++)this.chartData.rows[a].日期=this.dateArray[a]}}},l=s,c=(n("316e"),n("2877")),u=Object(c["a"])(l,i,a,!1,null,null,null);t["default"]=u.exports},"793e":function(e,t,n){"use strict";var i=n("a8ff"),a=n.n(i);a.a},"9ed6":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login-container"},[i("div",{staticClass:"login-logo"},[i("router-link",{attrs:{to:"/index"}},[i("el-image",{staticStyle:{width:"180px",height:"100px"},attrs:{src:n("5fbe"),fit:"contain"}},[i("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"})])],1)],1),i("div",{staticClass:"cap"},[i("el-form",{ref:"form",staticClass:"login-form",attrs:{model:e.form,rules:e.rules,"label-position":"left"}},[i("div",{staticClass:"title"},[e._v("欢迎登陆")]),i("div",{staticClass:"title-tips"},[e._v(" "+e._s("customer"===e.type?"用户":"管理员")+"登陆！ ")]),i("div",{staticClass:"login-type",on:{click:e.change}},[e._v(" "+e._s("userName"===e.loginType?"短信登陆":"用户名登陆")+" ")]),"userName"===e.loginType?i("div",["customer"===e.type?i("el-form-item",{staticStyle:{"margin-top":"40px"},attrs:{prop:"username"}},[i("el-input",{attrs:{placeholder:"请输入用户名",tabindex:"1",type:"text",autocomplete:"on","prefix-icon":"el-icon-user-solid"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}})],1):e._e(),"manager"===e.type?i("el-form-item",{staticStyle:{"margin-top":"40px"},attrs:{prop:"managerId"}},[i("el-input",{attrs:{placeholder:"请输入管理员账号",tabindex:"1",type:"text","prefix-icon":"el-icon-user-solid"},model:{value:e.form.managerId,callback:function(t){e.$set(e.form,"managerId","string"===typeof t?t.trim():t)},expression:"form.managerId"}})],1):e._e(),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,tabindex:"2",placeholder:"请输入密码","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}}),"password"===e.passwordType?i("span",{staticClass:"show-password",on:{click:e.handlePassword}},[i("i",{staticClass:"el-icon-view"})]):i("span",{staticClass:"show-password",on:{click:e.handlePassword}})],1)],1):e._e(),"phoneCode"===e.loginType?i("div",[i("el-form-item",{staticStyle:{"margin-top":"40px"},attrs:{prop:"phone"}},[i("el-input",{attrs:{type:"text",placeholder:"请输入手机号",maxlength:"11",autocomplete:"off","prefix-icon":"el-icon-mobile-phone"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"===typeof t?t.trim():t)},expression:"form.phone"}})],1),i("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"phoneCode"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"手机验证码","prefix-icon":"el-icon-postcard"},model:{value:e.form.phoneCode,callback:function(t){e.$set(e.form,"phoneCode","string"===typeof t?t.trim():t)},expression:"form.phoneCode"}}),i("el-button",{staticClass:"show-pwd phone-code",staticStyle:{height:"45px"},attrs:{type:"primary",disabled:e.isGetphone},on:{click:e.getPhoneCode}},[e._v(" "+e._s(e.phoneCode)+" ")])],1)],1):e._e(),i("div",{staticClass:"cusDo"},[i("router-link",{attrs:{to:"/resetPassword"}},[e._v("忘记密码")]),i("router-link",{attrs:{to:"/register"}},[e._v("注册")])],1),i("el-button",{staticClass:"login-btn",attrs:{loading:e.loading,type:"primary"},on:{click:e.handleLogin}},[e._v(" 登录 ")])],1)],1)])},a=[],r=(n("96cf"),n("1da1")),o=n("61f7"),s=n("c24f"),l=n("a026"),c={name:"Login",data:function(){var e=this,t=function(e,t,n){""===t?n(new Error("用户名不能为空")):n()},n=function(e,t,n){Object(o["b"])(t)?n():n(new Error("请输入数字"))},i=function(e,t,n){Object(o["c"])(t)?n():n(new Error("密码不能少于6位"))},a=function(t,n,i){n!==e.realPhoneCode?i(new Error("验证码不正确")):i()},r=function(e,t,n){Object(o["d"])(t)?n():n(new Error("请输入正确的手机号"))};return{nodeEnv:"production",title:this.$baseTitle,type:"manager"===this.$route.query.type?"manager":"customer",loginType:"userName",isGetphone:!1,getPhoneIntval:null,phoneCode:"获取验证码",realPhoneCode:"真实的验证码",form:{},rules:{username:[{required:!0,trigger:"blur",message:"请输入用户名"},{validator:t,trigger:"blur"}],managerId:[{required:!0,trigger:"blur",message:"请输入账号"},{required:!0,trigger:"blur",validator:n},{min:1,max:8,message:"账号为8位数字",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{validator:i,trigger:"blur"}],phone:[{required:!0,trigger:"blur",message:"请输入手机号码"},{validator:r,trigger:"blur"}],phoneCode:[{required:!0,trigger:"blur",message:"请输入手机验证码"},{required:!0,trigger:"blur",validator:n},{min:1,max:6,message:"验证码为6为数字",trigger:"blur"},{validator:a,trigger:"blur"}]},loading:!1,passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect||"/"},immediate:!0}},created:function(){},beforeDestroy:function(){this.getPhoneIntval=null,clearInterval(this.getPhoneIntval)},mounted:function(){},methods:{change:function(){"userName"===this.loginType?this.loginType="phoneCode":this.loginType="userName",this.$refs["form"].clearValidate()},handlePassword:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},getPhoneCode:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(Object(o["d"])(e.form.phone)),!Object(o["d"])(e.form.phone)){t.next=13;break}return e.isGetphone=!0,n=60,console.log(e.form.phone),t.next=7,Object(s["a"])(e.form.phone);case 7:i=t.sent,a=i.result,e.realPhoneCode=a,e.getPhoneIntval=setInterval((function(){n>0?(n--,e.phoneCode="重新获取("+n+"s)"):(clearInterval(e.getPhoneIntval),e.getPhoneIntval=null,e.phoneCode="获取验证码",e.isGetphone=!1)}),1e3),t.next=14;break;case 13:l["default"].prototype.$baseMessage("请先查手机号是否正确","error");case 14:case"end":return t.stop()}}),t)})))()},handleLogin:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.loading=!0;var n="";"userName"===e.loginType?n="customer"===e.type?{type:e.type,logintype:"userName",username:e.form.username,password:e.form.password}:{type:e.type,logintype:"userName",managerId:e.form.managerId,password:e.form.password}:"phoneCode"===e.loginType&&(n={type:e.type,logintype:"phoneCode",phone:e.form.phone,phoneCode:e.form.phoneCode}),console.log(n),e.$store.dispatch("user/login",n).then((function(){console.log(e.redirect);"/404"===e.redirect||"/401"===e.redirect||e.redirect;e.$router.push({path:"/"}).catch((function(){})),e.loading=!1})).catch((function(){e.loading=!1}))}))}}},u=c,d=(n("793e"),n("2877")),h=Object(d["a"])(u,i,a,!1,null,null,null);t["default"]=h.exports},a14b:function(e,t,n){"use strict";var i=n("45a5"),a=n.n(i);a.a},a8ff:function(e,t,n){},ba1a:function(e,t,n){(function(t,i){e.exports=i(n("3eba"),n("007d"),n("d28f"),n("ef97"))})(0,(function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var t={th:3,mi:6,bi:9,tr:12},n={zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0,abbrLabel:{th:"k",mi:"m",bi:"b",tr:"t"}},i=1e12,a=1e9,r=1e6,o=1e3;function s(e){return"number"===typeof e&&isNaN(e)}function l(e,t,n,i){var a=e.toString().split("."),r=t-(i||0),o=2===a.length?Math.min(Math.max(a[1].length,r),t):r,s=Math.pow(10,o),l=(n(e+"e+"+o)/s).toFixed(o);if(i>t-o){var c=new RegExp("\\.?0{1,"+(i-(t-o))+"}$");l=l.replace(c,"")}return l}function c(e,n,s,c){var u=Math.abs(n),d=!1,h=!1,f="",p="",m=!1,g=void 0,y=void 0;s=s||"",n=n||0,~s.indexOf("(")?(d=!0,s=s.replace(/[(|)]/g,"")):(~s.indexOf("+")||~s.indexOf("-"))&&(y=~s.indexOf("+")?s.indexOf("+"):n<0?s.indexOf("-"):-1,s=s.replace(/[+|-]/g,"")),~s.indexOf("a")&&(g=s.match(/a(k|m|b|t)?/),g=!!g&&g[1],~s.indexOf(" a")&&(f=" "),s=s.replace(new RegExp(f+"a[kmbt]?"),""),u>=i&&!g||"t"===g?(f+=e.abbrLabel.tr,n/=i):u<i&&u>=a&&!g||"b"===g?(f+=e.abbrLabel.bi,n/=a):u<a&&u>=r&&!g||"m"===g?(f+=e.abbrLabel.mi,n/=r):(u<r&&u>=o&&!g||"k"===g)&&(f+=e.abbrLabel.th,n/=o)),~s.indexOf("[.]")&&(h=!0,s=s.replace("[.]","."));var b=n.toString().split(".")[0],v=s.split(".")[1],x=s.indexOf(","),w=(s.split(".")[0].split(",")[0].match(/0/g)||[]).length;if(v?(~v.indexOf("[")?(v=v.replace("]",""),v=v.split("["),p=l(n,v[0].length+v[1].length,c,v[1].length)):p=l(n,v.length,c),b=p.split(".")[0],p=~p.indexOf(".")?"."+p.split(".")[1]:"",h&&0===+p.slice(1)&&(p="")):b=l(n,0,c),f&&!g&&+b>=1e3&&f!==t.trillion&&(b=""+ +b/1e3,f=t.million),~b.indexOf("-")&&(b=b.slice(1),m=!0),b.length<w)for(var O=w-b.length;O>0;O--)b="0"+b;x>-1&&(b=b.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),s.indexOf(".")||(b="");var k=b+p+(f||"");return d?k=(d&&m?"(":"")+k+(d&&m?")":""):y>=0?k=0===y?(m?"-":"+")+k:k+(m?"-":"+"):m&&(k="-"+k),k}function u(e,t){Object.keys(t).forEach((function(n){e[n]=t[n]}))}var d={regexp:/%/,format:function(e,t,n,i){var a=~t.indexOf(" %")?" ":"",r=void 0;return i.options.scalePercentBy100&&(e*=100),t=t.replace(/\s?%/,""),r=i._numberToFormat(e,t,n),~r.indexOf(")")?(r=r.split(""),r.splice(-1,0,a+"%"),r=r.join("")):r=r+a+"%",r}},h={},f={};function p(e,t,n){t=t||h.defaultFormat,n=n||Math.round;var i=void 0,a=void 0;if(0===e&&null!==h.zeroFormat)i=h.zeroFormat;else if(null===e&&null!==h.nullFormat)i=h.nullFormat;else{for(var r in f)if(f[r]&&t.match(f[r].regexp)){a=f[r].format;break}a=a||c.bind(null,h),i=a(e,t,n,m)}return i}function m(e,t,n){var i=void 0;return i=0===e||"undefined"===typeof e?0:null===e||s(e)?null:"string"===typeof e?h.zeroFormat&&e===h.zeroFormat?0:h.nullFormat&&e===h.nullFormat||!e.replace(/[^0-9]+/g,"").length?null:+e:+e||null,p(i,t,n)}u(h,n),m.options=h,m._numberToFormat=c.bind(null,h),m.register=function(e,t){f[e]=t},m.unregister=function(e){f[e]=null},m.setOptions=function(e){u(h,e)},m.reset=function(){u(h,n)},m.register("percentage",d);var g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function b(e,t){var n=null;return function(){var i=this,a=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(i,a)}),t)}}function v(e,t,n){if(t){var i=e,a=t.split(".");a.forEach((function(e,t){t===a.length-1?i[e]=n:(i[e]||(i[e]={}),i=i[e])}))}}var x="function"===typeof Symbol&&"symbol"===g(Symbol.iterator)?function(e){return"undefined"===typeof e?"undefined":g(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"===typeof e?"undefined":g(e)};function w(e){return Object.prototype.toString.call(e)}function O(e){return"undefined"===typeof e?"undefined":x(e)}function k(e){return"[object Object]"===w(e)}function C(e){return"[object Array]"===w(e)}function S(e){return"[object Function]"===w(e)}function _(e){return JSON.parse(JSON.stringify(e))}function j(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function A(e,t){if(e===t)return!0;if(null===e||null===t||"object"!==O(e)||"object"!==O(t))return e===t;for(var n in e)if(T(e,n)){var i=e[n],a=t[n],r=O(i);if("undefined"===O(a))return!1;if("object"===r){if(!A(i,a))return!1}else if(i!==a)return!1}for(var o in t)if(T(t,o)&&"undefined"===O(e)[o])return!1;return!0}var L=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-";if(isNaN(e))return i;if(!t)return e;if(S(t))return t(e,m);n=isNaN(n)?0:++n;var a=".["+new Array(n).join(0)+"]",r=t;switch(t){case"KMB":r=n?"0,0"+a+"a":"0,0a";break;case"normal":r=n?"0,0"+a:"0,0";break;case"percent":r=n?"0,0"+a+"%":"0,0.[00]%";break}return m(e,r)},E=function(e){var t={};return Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[e]=n}))})),t};function z(e){var t=e.dimension,n=e.rows,i=e.xAxisName,a=e.axisVisible,r=e.xAxisType;return t.map((function(e,t){return{type:r,nameLocation:"middle",nameGap:22,name:i[t]||"",axisTick:{show:!0,lineStyle:{color:"#eee"}},data:n.map((function(t){return t[e]})),show:a}}))}function D(e){var t=e.rows,n=e.axisSite,i=e.metrics,a=e.area,r=e.stack,o=e.nullAddZero,s=e.labelMap,l=e.label,c=e.itemStyle,u=e.lineStyle,d=e.areaStyle,h=e.dimension,f=[],p={},m=r&&E(r);return i.forEach((function(e){p[e]=[]})),t.forEach((function(e){i.forEach((function(t){var n=null;null!=e[t]?n=e[t]:o&&(n=0),p[t].push([e[h[0]],n])}))})),i.forEach((function(e){var t={name:null!=s[e]?s[e]:e,type:"line",data:p[e]};a&&(t.areaStyle={normal:{}}),n.right&&(t.yAxisIndex=~n.right.indexOf(e)?1:0),r&&m[e]&&(t.stack=m[e]),l&&(t.label=l),c&&(t.itemStyle=c),u&&(t.lineStyle=u),d&&(t.areaStyle=d),f.push(t)})),f}function $(e){for(var t=e.yAxisName,n=e.yAxisType,i=e.axisVisible,a=e.scale,r=e.min,o=e.max,s=e.digit,l={type:"value",axisTick:{show:!1},show:i},c=[],u=function(e){n[e]?c[e]=y({},l,{axisLabel:{formatter:function(t){return L(t,n[e],s)}}}):c[e]=y({},l),c[e].name=t[e]||"",c[e].scale=a[e]||!1,c[e].min=r[e]||null,c[e].max=o[e]||null},d=0;d<2;d++)u(d);return c}function N(e){var t=e.axisSite,n=e.yAxisType,i=e.digit,a=e.labelMap,r=e.tooltipFormatter,o=t.right||[],s=a?o.map((function(e){return void 0===a[e]?e:a[e]})):o;return{trigger:"axis",formatter:function(e){if(r)return r.apply(null,arguments);var t=[],a=e[0],o=a.name,l=a.axisValueLabel,c=o||l;return t.push(c+"<br>"),e.forEach((function(e){var a=e.seriesName,r=e.data,o=e.marker,l=null,c=~s.indexOf(a)?n[1]:n[0],u=C(r)?r[1]:r;l=L(u,c,i),t.push(o),t.push(a+": "+l),t.push("<br>")})),t.join("")}}}function I(e){var t=e.metrics,n=e.legendName,i=e.labelMap;if(!n&&!i)return{data:t};var a=i?t.map((function(e){return null==i[e]?e:i[e]})):t;return{data:a,formatter:function(e){return null!=n[e]?n[e]:e}}}var P=function(e,t,n,i){t=C(t)?t:[],e=C(e)?e:[];var a=n.axisSite,r=void 0===a?{}:a,o=n.yAxisType,s=void 0===o?["normal","normal"]:o,l=n.xAxisType,c=void 0===l?"category":l,u=n.yAxisName,d=void 0===u?[]:u,h=n.dimension,f=void 0===h?[e[0]]:h,p=n.xAxisName,m=void 0===p?[]:p,g=n.axisVisible,y=void 0===g||g,b=n.area,v=n.stack,x=n.scale,w=void 0===x?[!1,!1]:x,O=n.min,k=void 0===O?[null,null]:O,S=n.max,_=void 0===S?[null,null]:S,j=n.nullAddZero,T=void 0!==j&&j,A=n.digit,L=void 0===A?2:A,E=n.legendName,P=void 0===E?{}:E,F=n.labelMap,M=void 0===F?{}:F,H=n.label,R=n.itemStyle,B=n.lineStyle,V=n.areaStyle,W=i.tooltipVisible,q=i.legendVisible,G=i.tooltipFormatter,J=e.slice();r.left&&r.right?J=r.left.concat(r.right):r.left&&!r.right?J=r.left:n.metrics?J=n.metrics:J.splice(e.indexOf(f[0]),1);var U=q&&I({metrics:J,legendName:P,labelMap:M}),Z=W&&N({axisSite:r,yAxisType:s,digit:L,labelMap:M,xAxisType:c,tooltipFormatter:G}),K=z({dimension:f,rows:t,xAxisName:m,axisVisible:y,xAxisType:c}),Q=$({yAxisName:d,yAxisType:s,axisVisible:y,scale:w,min:k,max:_,digit:L}),X=D({rows:t,axisSite:r,metrics:J,area:b,stack:v,nullAddZero:T,labelMap:M,label:H,itemStyle:R,lineStyle:B,areaStyle:V,xAxisType:c,dimension:f}),Y={legend:U,xAxis:K,series:X,yAxis:Q,tooltip:Z};return Y},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-charts-component-loading"},[n("div",{staticClass:"loader"},[n("div",{staticClass:"loading-spinner"},[n("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])])])])},staticRenderFns:[]},M={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-charts-data-empty"},[e._v(" 暂无数据 ")])},staticRenderFns:[]},H={categoryAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},valueAxis:{axisLine:{show:!1}},line:{smooth:!0},grid:{containLabel:!0,left:10,right:10}},R=["#19d4ae","#5ab1ef","#fa6e86","#ffb980","#0067a6","#c4b4e4","#d87a80","#9cbbff","#d9d0c7","#87a997","#d49ea2","#5b4947","#7ba3a8"],B=["initOptions","loading","dataEmpty","judgeWidth","widthChangeDelay"],V=["grid","dataZoom","visualMap","toolbox","title","legend","xAxis","yAxis","radar","tooltip","axisPointer","brush","geo","timeline","graphic","series","backgroundColor","textStyle"];function W(e,t){Object.keys(t).forEach((function(n){var i=t[n];~n.indexOf(".")?v(e,n,i):"function"===typeof i?e[n]=i(e[n]):C(e[n])&&k(e[n][0])?e[n].forEach((function(t,a){e[n][a]=y({},t,i)})):k(e[n])?e[n]=y({},e[n],i):e[n]=i}))}function q(e,t){Object.keys(t).forEach((function(n){t[n]&&(e[n]=t[n])}))}function G(e,t){Object.keys(t).forEach((function(n){e[n]=t[n]}))}var J={render:function(e){return e("div",{class:[j(this.$options.name||this.$options._componentTag)],style:this.canvasStyle},[e("div",{style:this.canvasStyle,class:{"v-charts-mask-status":this.dataEmpty||this.loading},ref:"canvas"}),e(M,{style:{display:this.dataEmpty?"":"none"}}),e(F,{style:{display:this.loading?"":"none"}}),this.$slots.default])},props:{data:{type:[Object,Array],default:function(){return{}}},settings:{type:Object,default:function(){return{}}},width:{type:String,default:"auto"},height:{type:String,default:"400px"},beforeConfig:{type:Function},afterConfig:{type:Function},afterSetOption:{type:Function},afterSetOptionOnce:{type:Function},events:{type:Object},grid:{type:[Object,Array]},colors:{type:Array},tooltipVisible:{type:Boolean,default:!0},legendVisible:{type:Boolean,default:!0},legendPosition:{type:String},markLine:{type:Object},markArea:{type:Object},markPoint:{type:Object},visualMap:{type:[Object,Array]},dataZoom:{type:[Object,Array]},toolbox:{type:[Object,Array]},initOptions:{type:Object,default:function(){return{}}},title:[Object,Array],legend:[Object,Array],xAxis:[Object,Array],yAxis:[Object,Array],radar:Object,tooltip:Object,axisPointer:[Object,Array],brush:[Object,Array],geo:[Object,Array],timeline:[Object,Array],graphic:[Object,Array],series:[Object,Array],backgroundColor:[Object,String],textStyle:[Object,Array],animation:Object,theme:Object,themeName:String,loading:Boolean,dataEmpty:Boolean,extend:Object,judgeWidth:{type:Boolean,default:!1},widthChangeDelay:{type:Number,default:300},tooltipFormatter:{type:Function},resizeable:{type:Boolean,default:!0},resizeDelay:{type:Number,default:200},changeDelay:{type:Number,default:0},setOptionOpts:{type:[Boolean,Object],default:!0},cancelResizeCheck:Boolean,notSetUnchange:Array,log:Boolean},watch:{data:{deep:!0,handler:function(e){e&&this.changeHandler()}},settings:{deep:!0,handler:function(e){e.type&&this.chartLib&&(this.chartHandler=this.chartLib[e.type]),this.changeHandler()}},width:"nextTickResize",height:"nextTickResize",events:{deep:!0,handler:"createEventProxy"},theme:{deep:!0,handler:"themeChange"},themeName:"themeChange",resizeable:"resizeableHandler"},computed:{canvasStyle:function(){return{width:this.width,height:this.height,position:"relative"}},chartColor:function(){return this.colors||this.theme&&this.theme.color||R}},methods:{dataHandler:function(){if(this.chartHandler){var e=this.data,t=e,n=t.columns,i=void 0===n?[]:n,a=t.rows,r=void 0===a?[]:a,o={tooltipVisible:this.tooltipVisible,legendVisible:this.legendVisible,echarts:this.echarts,color:this.chartColor,tooltipFormatter:this.tooltipFormatter,_once:this._once};this.beforeConfig&&(e=this.beforeConfig(e));var s=this.chartHandler(i,r,this.settings,o);s&&("function"===typeof s.then?s.then(this.optionsHandler):this.optionsHandler(s))}},nextTickResize:function(){this.$nextTick(this.resize)},resize:function(){(this.cancelResizeCheck||this.$el&&this.$el.clientWidth&&this.$el.clientHeight)&&this.echartsResize()},echartsResize:function(){this.echarts&&this.echarts.resize()},optionsHandler:function(t){var n=this;if(this.legendPosition&&t.legend&&(t.legend[this.legendPosition]=10,~["left","right"].indexOf(this.legendPosition)&&(t.legend.top="middle",t.legend.orient="vertical")),t.color=this.chartColor,V.forEach((function(e){n[e]&&(t[e]=n[e])})),this.animation&&G(t,this.animation),this.markArea||this.markLine||this.markPoint){var i={markArea:this.markArea,markLine:this.markLine,markPoint:this.markPoint},a=t.series;C(a)?a.forEach((function(e){q(e,i)})):k(a)&&q(a,i)}this.extend&&W(t,this.extend),this.afterConfig&&(t=this.afterConfig(t));var r=this.setOptionOpts;!this.settings.bmap&&!this.settings.amap||k(r)||(r=!1),this.notSetUnchange&&this.notSetUnchange.length&&(this.notSetUnchange.forEach((function(e){var i=t[e];i&&(A(i,n._store[e])?t[e]=void 0:n._store[e]=_(i))})),k(r)?r.notMerge=!1:r=!1),this._isDestroyed||(this.log&&console.log(t),this.echarts.setOption(t,r),this.$emit("ready",this.echarts,t,e),this._once["ready-once"]||(this._once["ready-once"]=!0,this.$emit("ready-once",this.echarts,t,e)),this.judgeWidth&&this.judgeWidthHandler(t),this.afterSetOption&&this.afterSetOption(this.echarts,t,e),this.afterSetOptionOnce&&!this._once["afterSetOptionOnce"]&&(this._once["afterSetOptionOnce"]=!0,this.afterSetOptionOnce(this.echarts,t,e)))},judgeWidthHandler:function(e){var t=this,n=this.widthChangeDelay,i=this.resize;this.$el.clientWidth||this.$el.clientHeight?i():this.$nextTick((function(e){t.$el.clientWidth||t.$el.clientHeight?i():setTimeout((function(e){i(),t.$el.clientWidth&&t.$el.clientHeight||console.warn(" Can't get dom width or height ")}),n)}))},resizeableHandler:function(e){e&&!this._once.onresize&&this.addResizeListener(),!e&&this._once.onresize&&this.removeResizeListener()},init:function(){if(!this.echarts){var t=this.themeName||this.theme||H;this.echarts=e.init(this.$refs.canvas,t,this.initOptions),this.data&&this.changeHandler(),this.createEventProxy(),this.resizeable&&this.addResizeListener()}},addResizeListener:function(){window.addEventListener("resize",this.resizeHandler),this._once.onresize=!0},removeResizeListener:function(){window.removeEventListener("resize",this.resizeHandler),this._once.onresize=!1},addWatchToProps:function(){var e=this,t=this._watchers.map((function(e){return e.expression}));Object.keys(this.$props).forEach((function(n){if(!~t.indexOf(n)&&!~B.indexOf(n)){var i={};~["[object Object]","[object Array]"].indexOf(w(e.$props[n]))&&(i.deep=!0),e.$watch(n,(function(){e.changeHandler()}),i)}}))},createEventProxy:function(){var e=this,t=this,n=Object.keys(this.events||{});n.length&&n.forEach((function(n){-1===e.registeredEvents.indexOf(n)&&(e.registeredEvents.push(n),e.echarts.on(n,function(e){return function(){if(e in t.events){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];t.events[e].apply(null,i)}}}(n)))}))},themeChange:function(e){this.clean(),this.echarts=null,this.init()},clean:function(){this.resizeable&&this.removeResizeListener(),this.echarts.dispose()}},created:function(){this.echarts=null,this.registeredEvents=[],this._once={},this._store={},this.resizeHandler=b(this.resize,this.resizeDelay),this.changeHandler=b(this.dataHandler,this.changeDelay),this.addWatchToProps()},mounted:function(){this.init()},beforeDestroy:function(){this.clean()},_numerify:m},U=y({},J,{name:"VeLine",data:function(){return this.chartHandler=P,{}}});return U}))}}]);
//# sourceMappingURL=chunk-5e1e2336.701eb2ec.js.map